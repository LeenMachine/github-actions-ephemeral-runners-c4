<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ephemeral GitHub Actions Runners - C4 Architecture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; font-family: system-ui, -apple-system, sans-serif; }
    </style>
</head>
<body class="bg-slate-900">
    <div id="app"></div>
    
    <script>
        const tabs = ['context', 'containers', 'components', 'team', 'notes'];
        let activeTab = 'containers';
        
        function render() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <div class="flex flex-col h-screen">
                    <!-- Header -->
                    <div class="bg-slate-800 border-b border-slate-700 p-4">
                        <h1 class="text-2xl font-bold text-white mb-2">Ephemeral GitHub Actions Runners</h1>
                        <p class="text-slate-300 text-sm">C4 Architecture</p>
                    </div>
                    
                    <!-- Tabs -->
                    <div class="bg-slate-800 border-b border-slate-700 px-4 py-2 flex gap-2">
                        ${tabs.map(tab => `
                            <button onclick="switchTab('${tab}')" 
                                class="px-4 py-2 rounded text-sm font-medium transition ${
                                    activeTab === tab 
                                    ? 'bg-blue-600 text-white' 
                                    : 'bg-slate-700 text-slate-300 hover:bg-slate-600'
                                }">
                                ${tab === 'context' ? 'Level 1: Context' : 
                                  tab === 'containers' ? 'Level 2: Containers' : 
                                  tab === 'components' ? 'Level 3: Components' :
                                  tab === 'team' ? 'Team Topologies' : 
                                  'Architecture Notes'}
                            </button>
                        `).join('')}
                    </div>
                    
                    <!-- Content -->
                    <div class="flex-1 overflow-auto bg-gradient-to-br from-slate-50 to-slate-100 p-8">
                        ${getContent(activeTab)}
                    </div>
                    
                    <!-- Footer -->
                    <div class="bg-slate-800 border-t border-slate-700 px-4 py-2">
                        <p class="text-slate-400 text-xs">
                            Multi-instance GitHub support ‚Ä¢ Blue/Green HA ‚Ä¢ Cilium eBPF ‚Ä¢ OIDC + Vault ‚Ä¢ Warm start pools ‚Ä¢ Isolated node pools ‚Ä¢ Listener-based autoscaling
                        </p>
                    </div>
                </div>
            `;
        }
        
        function switchTab(tab) {
            activeTab = tab;
            render();
        }
        
        function getContent(tab) {
            if (tab === 'context') return contextContent();
            if (tab === 'containers') return containersContent();
            if (tab === 'components') return componentsContent();
            if (tab === 'team') return teamContent();
            return notesContent();
        }
        
        function contextContent() {
            return `
                <div class="max-w-6xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-slate-800">Level 1: System Context</h3>
                    
                    <div class="relative min-h-[500px] mb-8">
                        <div class="absolute top-0 left-0 w-48 bg-blue-100 border-2 border-blue-400 rounded p-4">
                            <div class="font-bold text-blue-900">Developers</div>
                            <div class="text-sm text-blue-700 mt-2">Push code, trigger workflows</div>
                        </div>
                        
                        <div class="absolute top-0 right-20 w-56 bg-purple-100 border-2 border-purple-400 rounded p-4">
                            <div class="font-bold text-purple-900">GitHub Enterprise Server</div>
                            <div class="text-xs text-purple-700 mt-2">On-premises</div>
                        </div>
                        
                        <div class="absolute top-24 right-20 w-56 bg-purple-100 border-2 border-purple-400 rounded p-4">
                            <div class="font-bold text-purple-900">GitHub Cloud</div>
                            <div class="text-xs text-purple-700 mt-2">SaaS</div>
                        </div>
                        
                        <div class="mx-auto mt-48 w-[500px] bg-blue-500 border-4 border-blue-700 rounded-lg p-6 shadow-xl">
                            <div class="font-bold text-white text-xl">Ephemeral GitHub Actions Runner Platform</div>
                            <div class="text-sm text-blue-100 mt-3">
                                Multi-instance runner provisioning with separate compute for Enterprise and Cloud
                            </div>
                        </div>
                        
                        <div class="absolute bottom-0 left-1/4 w-64 bg-orange-100 border-2 border-orange-400 rounded p-4">
                            <div class="font-bold text-orange-900">AWS Cloud</div>
                            <div class="text-sm text-orange-800 mt-2">EKS clusters (Blue/Green), OIDC, expanded VPC</div>
                        </div>
                        
                        <div class="absolute bottom-0 right-1/4 w-64 bg-yellow-100 border-2 border-yellow-400 rounded p-4">
                            <div class="font-bold text-yellow-900">HashiCorp Vault</div>
                            <div class="text-sm text-yellow-800 mt-2">Secrets management, OIDC</div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Key Relationships:</h4>
                        <ul class="space-y-2 text-sm text-slate-700">
                            <li>‚Üí Developers push to GitHub Enterprise Server (on-prem) or GitHub Cloud</li>
                            <li>‚Üí Separate runner compute for each GitHub instance with listener-based autoscaling</li>
                            <li>‚Üí Blue/Green cluster deployment for high availability</li>
                            <li>‚Üí Runner groups and labels route jobs appropriately</li>
                            <li>‚Üí OIDC trust with AWS and HashiCorp Vault</li>
                            <li>‚Üí Handles thousands of parallel jobs at peak serving 1000+ developers</li>
                        </ul>
                    </div>
                </div>
            `;
        }
        
        function containersContent() {
            return `
                <div class="max-w-7xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-slate-800">Level 2: Container Diagram</h3>
                    
                    <div class="grid grid-cols-3 gap-6 mb-8">
                        <!-- GitHub Instances -->
                        <div class="space-y-4">
                            <div class="bg-purple-100 border-2 border-purple-400 rounded-lg p-4">
                                <div class="font-bold text-purple-900">GitHub Enterprise Server</div>
                                <div class="text-xs text-purple-700 mt-2">On-premises</div>
                                <div class="text-sm text-purple-800 mt-3">
                                    ‚Ä¢ Workflows<br/>
                                    ‚Ä¢ Runner groups<br/>
                                    ‚Ä¢ Listener-based scaling
                                </div>
                            </div>
                            <div class="bg-purple-100 border-2 border-purple-400 rounded-lg p-4">
                                <div class="font-bold text-purple-900">GitHub Cloud</div>
                                <div class="text-xs text-purple-700 mt-2">SaaS</div>
                                <div class="text-sm text-purple-800 mt-3">
                                    ‚Ä¢ Workflows<br/>
                                    ‚Ä¢ Webhooks<br/>
                                    ‚Ä¢ Runner groups<br/>
                                    ‚Ä¢ Listener-based scaling
                                </div>
                            </div>
                        </div>
                        
                        <!-- Runner Platform -->
                        <div class="bg-orange-50 border-4 border-orange-400 rounded-lg p-4">
                            <div class="font-bold text-orange-900 text-lg mb-3">AWS EKS (Blue/Green)</div>
                            <div class="space-y-3 text-sm">
                                <div class="bg-green-100 border border-green-400 rounded p-3">
                                    <div class="font-bold text-green-900">Runner Controllers</div>
                                    <div class="text-green-800 mt-1">
                                        ‚Ä¢ Listener per team<br/>
                                        ‚Ä¢ Autoscale runners + nodes<br/>
                                        ‚Ä¢ GitHub Actions Runner Scale Sets
                                    </div>
                                </div>
                                <div class="bg-green-100 border border-green-400 rounded p-3">
                                    <div class="font-bold text-green-900">Worker Nodes</div>
                                    <div class="text-green-800 mt-1">
                                        ‚Ä¢ Karpenter autoscaling<br/>
                                        ‚Ä¢ Scale EC2 instances<br/>
                                        ‚Ä¢ Spot + On-Demand
                                    </div>
                                </div>
                                <div class="bg-green-100 border border-green-400 rounded p-3">
                                    <div class="font-bold text-green-900">Ephemeral Runner Pods</div>
                                    <div class="text-green-800 mt-1">
                                        ‚Ä¢ Runner scale sets<br/>
                                        ‚Ä¢ High availability<br/>
                                        ‚Ä¢ Auto-cleanup
                                    </div>
                                </div>
                                <div class="bg-green-100 border border-green-400 rounded p-3">
                                    <div class="font-bold text-green-900">Node Pools</div>
                                    <div class="text-green-800 mt-1">
                                        ‚Ä¢ Warm start pool<br/>
                                        ‚Ä¢ Isolated high-resource pools<br/>
                                        ‚Ä¢ Custom compute
                                    </div>
                                </div>
                                <div class="bg-blue-100 border border-blue-400 rounded p-3">
                                    <div class="font-bold text-blue-900">Cilium eBPF (CNI)</div>
                                    <div class="text-blue-800 mt-1">
                                        ‚Ä¢ Network policies<br/>
                                        ‚Ä¢ Encryption (WireGuard)<br/>
                                        ‚Ä¢ L7 observability (Hubble)<br/>
                                        ‚Ä¢ High performance
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Supporting Services -->
                        <div class="space-y-4">
                            <div class="bg-yellow-100 border-2 border-yellow-500 rounded-lg p-4">
                                <div class="font-bold text-yellow-900">Custom Image Bakery</div>
                                <div class="text-sm text-yellow-800 mt-2">
                                    ‚Ä¢ Base images<br/>
                                    ‚Ä¢ Team custom images<br/>
                                    ‚Ä¢ Security scanning<br/>
                                    ‚Ä¢ Automated builds
                                </div>
                            </div>
                            <div class="bg-yellow-100 border-2 border-yellow-500 rounded-lg p-4">
                                <div class="font-bold text-yellow-900">OIDC + Vault</div>
                                <div class="text-sm text-yellow-800 mt-2">
                                    ‚Ä¢ GitHub ‚Üí AWS roles<br/>
                                    ‚Ä¢ GitHub ‚Üí Vault secrets<br/>
                                    ‚Ä¢ No static credentials<br/>
                                    ‚Ä¢ Short-lived tokens
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Key Features:</h4>
                        <div class="grid grid-cols-3 gap-6 text-sm text-slate-700">
                            <div>
                                <div class="font-semibold text-slate-900 mb-2">Blue/Green High Availability:</div>
                                <ul class="space-y-1 ml-4 list-disc">
                                    <li>Active + Standby clusters</li>
                                    <li>Zero-downtime updates</li>
                                    <li>Instant failover</li>
                                    <li>Safe testing environment</li>
                                </ul>
                            </div>
                            <div>
                                <div class="font-semibold text-slate-900 mb-2">Listener-Based Autoscaling:</div>
                                <ul class="space-y-1 ml-4 list-disc">
                                    <li>Listener per team</li>
                                    <li>Runner scale sets</li>
                                    <li>Karpenter node scaling</li>
                                    <li>Two-layer autoscaling</li>
                                </ul>
                            </div>
                            <div>
                                <div class="font-semibold text-slate-900 mb-2">Developer Experience:</div>
                                <ul class="space-y-1 ml-4 list-disc">
                                    <li>Warm start pools (~5s)</li>
                                    <li>Custom Image Bakery</li>
                                    <li>Community + SIGs</li>
                                    <li>Self-service platform</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function componentsContent() {
            return `
                <div class="max-w-7xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-slate-800">Level 3: Component Diagram</h3>
                    
                    <div class="bg-green-50 border-4 border-green-500 rounded-lg p-8 mb-8">
                        <h4 class="text-xl font-bold text-green-900 mb-6">Runner Controller Components</h4>
                        
                        <div class="grid grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4">
                                    <div class="font-bold text-blue-900">Webhook Router</div>
                                    <div class="text-sm text-blue-800 mt-3">
                                        ‚Ä¢ Routes Enterprise/Cloud webhooks<br/>
                                        ‚Ä¢ Extracts runner groups<br/>
                                        ‚Ä¢ Validates payloads
                                    </div>
                                </div>
                                <div class="bg-blue-100 border-2 border-blue-500 rounded-lg p-4">
                                    <div class="font-bold text-blue-900">Team Verifier</div>
                                    <div class="text-sm text-blue-800 mt-3">
                                        ‚Ä¢ GitHub Teams API integration<br/>
                                        ‚Ä¢ Caches membership data<br/>
                                        ‚Ä¢ Enforces team isolation
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <div class="bg-purple-100 border-2 border-purple-500 rounded-lg p-4">
                                    <div class="font-bold text-purple-900">Pod Provisioner</div>
                                    <div class="text-sm text-purple-800 mt-3">
                                        ‚Ä¢ Creates ephemeral runner pods<br/>
                                        ‚Ä¢ Enforces max pods per node<br/>
                                        ‚Ä¢ Manages lifecycle
                                    </div>
                                </div>
                                <div class="bg-purple-100 border-2 border-purple-500 rounded-lg p-4">
                                    <div class="font-bold text-purple-900">OIDC Manager</div>
                                    <div class="text-sm text-purple-800 mt-3">
                                        ‚Ä¢ AWS IAM role mapping<br/>
                                        ‚Ä¢ Vault authentication<br/>
                                        ‚Ä¢ Token management
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-bold text-slate-800 mb-3">Node Pool Strategy:</h4>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>‚úì <strong>Shared warm start pool</strong> - Zero cold start for common workloads</li>
                                <li>‚úì <strong>Isolated pools</strong> - Dedicated compute for high-resource teams</li>
                                <li>‚úì <strong>Custom compute on request</strong> - GPU, high-memory, NVMe storage</li>
                                <li>‚úì <strong>Fair I/O allocation</strong> - Max pods per node prevents noisy neighbors</li>
                            </ul>
                        </div>
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="font-bold text-slate-800 mb-3">Security Components:</h4>
                            <ul class="space-y-2 text-sm text-slate-700">
                                <li>üîê <strong>OIDC to AWS</strong> - No static credentials, IAM role assumption</li>
                                <li>üîê <strong>OIDC to Vault</strong> - Dynamic secret injection</li>
                                <li>üîê <strong>Cilium encryption</strong> - WireGuard for data in transit</li>
                                <li>üîê <strong>Team verification</strong> - GitHub Teams API integration</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-6">
                        <h4 class="font-bold text-blue-900 mb-3">Autoscaling Flow:</h4>
                        <div class="font-mono text-sm bg-white p-4 rounded">
                            GitHub Webhook ‚Üí Listener (per team) ‚Üí Runner Scale Set ‚Üí Pod Creation ‚Üí Karpenter ‚Üí EC2 Node Provisioning
                        </div>
                        <p class="text-sm text-blue-900 mt-3">
                            Two-layer autoscaling ensures both runner pods and underlying nodes scale based on demand
                        </p>
                    </div>
                </div>
            `;
        }
        
        function teamContent() {
            return `
                <div class="max-w-6xl mx-auto space-y-6">
                    <h3 class="text-2xl font-bold text-slate-800">Team Topologies & Human Engineering</h3>
                    
                    <div class="bg-blue-100 border-4 border-blue-500 rounded-lg p-6">
                        <h4 class="text-xl font-bold text-blue-900 mb-2">People First, Features Second</h4>
                        <p class="text-slate-700">Optimize for developer experience and psychological safety over feature delivery</p>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Psychological Safety</h4>
                        <div class="grid grid-cols-2 gap-4 text-sm text-slate-700">
                            <div>
                                <strong class="text-slate-900">What:</strong><br/>
                                ‚Ä¢ Safe environment for experimentation<br/>
                                ‚Ä¢ Failures treated as learning opportunities<br/>
                                ‚Ä¢ Trust-based culture
                            </div>
                            <div>
                                <strong class="text-slate-900">How:</strong><br/>
                                ‚Ä¢ Regular 1:1s with open dialogue<br/>
                                ‚Ä¢ Blameless retrospectives<br/>
                                ‚Ä¢ Open communication channels
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Kanban Process</h4>
                        <p class="text-sm text-slate-700 mb-2">Manage changing requirements while maintaining delivery flow</p>
                        <div class="bg-slate-100 p-3 rounded font-mono text-xs text-slate-800">
Backlog ‚Üí Ready ‚Üí In Progress (WIP:5) ‚Üí Review (WIP:3) ‚Üí Done
                        </div>
                        <p class="text-sm text-slate-600 mt-2 italic">Work-in-progress limits prevent overload and maintain flow</p>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Developer Experience Over Features</h4>
                        <div class="bg-green-100 p-4 rounded mb-3">
                            <strong class="text-green-900">North Star:</strong> <span class="text-green-800">"Will developers love using this?"</span>
                        </div>
                        <div class="grid grid-cols-2 gap-4 text-sm text-slate-700">
                            <div>
                                <strong class="text-slate-900">Optimized For:</strong><br/>
                                ‚Ä¢ Instant feedback loops<br/>
                                ‚Ä¢ Clear, actionable error messages<br/>
                                ‚Ä¢ Self-service capabilities<br/>
                                ‚Ä¢ Intuitive interfaces
                            </div>
                            <div>
                                <strong class="text-slate-900">Deprioritized:</strong><br/>
                                ‚Ä¢ Features without great UX<br/>
                                ‚Ä¢ Complex capabilities few use<br/>
                                ‚Ä¢ One-off custom solutions<br/>
                                ‚Ä¢ Admin-heavy workflows
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Community Engineering</h4>
                        <div class="grid grid-cols-3 gap-4 text-sm text-slate-700">
                            <div>
                                <strong class="text-slate-900">SIG Groups:</strong><br/>
                                ‚Ä¢ SIG-Security<br/>
                                ‚Ä¢ SIG-ML<br/>
                                ‚Ä¢ SIG-DevEx<br/>
                                ‚Ä¢ Monthly meetings<br/>
                                ‚Ä¢ Community-led initiatives
                            </div>
                            <div>
                                <strong class="text-slate-900">Showcases:</strong><br/>
                                ‚Ä¢ Monthly platform demos<br/>
                                ‚Ä¢ Live feature previews<br/>
                                ‚Ä¢ Interactive feedback sessions<br/>
                                ‚Ä¢ Roadmap transparency
                            </div>
                            <div>
                                <strong class="text-slate-900">Voice of Customer:</strong><br/>
                                ‚Ä¢ Weekly office hours<br/>
                                ‚Ä¢ Quarterly surveys<br/>
                                ‚Ä¢ Direct Slack channels<br/>
                                ‚Ä¢ Priority #1 in all decisions
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow">
                        <h4 class="font-bold text-slate-800 mb-3">Results</h4>
                        <div class="grid grid-cols-2 gap-4 text-sm text-slate-700">
                            <div>
                                <strong class="text-slate-900">Quantitative:</strong><br/>
                                ‚Ä¢ Nearly entire company using platform<br/>
                                ‚Ä¢ 40% satisfaction score increase<br/>
                                ‚Ä¢ 30% developer productivity improvement<br/>
                                ‚Ä¢ 60% reduction in support tickets
                            </div>
                            <div>
                                <strong class="text-slate-900">Qualitative:</strong><br/>
                                ‚Ä¢ Developers actively advocated for platform<br/>
                                ‚Ä¢ Teams voluntarily migrated TO platform<br/>
                                ‚Ä¢ Leadership recognition and adoption<br/>
                                ‚Ä¢ Blueprint for other internal teams
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function notesContent() {
            return `
                <div class="max-w-6xl mx-auto">
                    <h3 class="text-2xl font-bold mb-6 text-slate-800">Architecture Decisions & Technical Details</h3>
                    
                    <div class="space-y-6">
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Blue/Green Deployment Strategy</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Problem:</strong> Need zero-downtime updates and instant disaster recovery</p>
                            <p class="text-sm text-slate-700 mb-2"><strong>Solution:</strong> Maintain two identical EKS clusters - one active, one standby</p>
                            <p class="text-sm text-slate-700"><strong>Benefits:</strong> Zero-downtime updates, instant failover, safe testing environment, quick rollback</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Listener-Based Autoscaling</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Architecture:</strong> Each team gets dedicated listener monitoring GitHub webhook queue</p>
                            <p class="text-sm text-slate-700 mb-2"><strong>Two-Layer Scaling:</strong> Runner Scale Sets provision pods ‚Üí Karpenter provisions nodes</p>
                            <p class="text-sm text-slate-700"><strong>Result:</strong> Independent team scaling, no cross-team interference, predictable performance</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Warm Start Strategy</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Problem:</strong> Cold start adds 30-60s latency per job</p>
                            <p class="text-sm text-slate-700 mb-2"><strong>Solution:</strong> Maintain pre-warmed runner pool with common images</p>
                            <p class="text-sm text-slate-700"><strong>Result:</strong> ~5 second job start time, dramatically better developer experience</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Node Pool Isolation</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Challenge:</strong> High-resource teams create noisy neighbor problems</p>
                            <p class="text-sm text-slate-700 mb-2"><strong>Solution:</strong> Dedicated node pools for intensive workloads (ML, video processing, large builds)</p>
                            <p class="text-sm text-slate-700"><strong>Benefits:</strong> Performance isolation, custom hardware support (GPU, NVMe), predictable costs</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Custom Image Bakery</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Centralized system for building and distributing runner images:</strong></p>
                            <ul class="ml-6 list-disc text-sm text-slate-700 space-y-1">
                                <li>Base images with security hardening and common tools</li>
                                <li>Team-specific custom images with specialized tooling</li>
                                <li>Automated security scanning (Trivy, Grype)</li>
                                <li>Scheduled rebuilds for security patches</li>
                            </ul>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">IP Exhaustion Solution</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Problem:</strong> Original VPC ran out of IPs at scale</p>
                            <p class="text-sm text-slate-700 mb-2"><strong>Solution:</strong> Expanded VPC address space by 4x</p>
                            <p class="text-sm text-slate-700"><strong>Result:</strong> Support for thousands of parallel jobs with room for growth</p>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Cilium eBPF Network Layer</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Why Cilium over traditional CNI:</strong></p>
                            <ul class="ml-6 list-disc text-sm text-slate-700 space-y-1">
                                <li>Network policies for team isolation and security</li>
                                <li>Transparent encryption in transit (WireGuard)</li>
                                <li>Hubble for L7 observability and troubleshooting</li>
                                <li>High performance via eBPF bypassing netfilter</li>
                                <li>Native Kubernetes integration</li>
                            </ul>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">OIDC + Vault Architecture</h4>
                            <p class="text-sm text-slate-700 mb-2"><strong>Zero-trust multi-cloud credential framework:</strong></p>
                            <ul class="ml-6 list-disc text-sm text-slate-700 space-y-1">
                                <li>GitHub OIDC ‚Üí AWS IAM roles (no static AWS credentials)</li>
                                <li>GitHub OIDC ‚Üí Vault dynamic secrets (database, API keys)</li>
                                <li>Short-lived tokens only (15-60 minutes)</li>
                                <li>Automatic credential rotation and revocation</li>
                                <li>Full audit trail of credential usage</li>
                            </ul>
                        </div>
                        
                        <div class="bg-white rounded-lg p-6 shadow">
                            <h4 class="text-lg font-bold text-slate-800 mb-3">Scale Metrics & Performance</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <p class="font-semibold text-slate-900 mb-2">Capacity:</p>
                                    <ul class="ml-4 list-disc text-slate-700">
                                        <li>1000+ developers served across organization</li>
                                        <li>1000s of parallel jobs at peak load</li>
                                        <li>500+ concurrent runners typical</li>
                                        <li>~5 second warm start time</li>
                                        <li>99.9% uptime SLA achieved</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold text-slate-900 mb-2">Cost Efficiency:</p>
                                    <ul class="ml-4 list-disc text-slate-700">
                                        <li>70% cost savings vs persistent runners</li>
                                        <li>Spot instance optimization (75% spot usage)</li>
                                        <li>Zero cost when idle (truly ephemeral)</li>
                                        <li>Karpenter intelligent bin-packing</li>
                                        <li>Auto-scaling prevents overprovisioning</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 border-2 border-blue-400 rounded-lg p-6">
                            <h4 class="text-lg font-bold text-blue-900 mb-3">Key Technical Decisions Summary</h4>
                            <div class="grid grid-cols-2 gap-4 text-sm text-blue-900">
                                <div>
                                    <p class="font-semibold mb-2">Infrastructure:</p>
                                    <ul class="ml-4 list-disc">
                                        <li>Kubernetes (EKS) for orchestration</li>
                                        <li>Cilium for networking</li>
                                        <li>Karpenter for node autoscaling</li>
                                        <li>GitHub Actions Runner Scale Sets</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold mb-2">Security & Ops:</p>
                                    <ul class="ml-4 list-disc">
                                        <li>OIDC for credential-free auth</li>
                                        <li>HashiCorp Vault for secrets</li>
                                        <li>Blue/Green for high availability</li>
                                        <li>Custom Image Bakery for images</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Initialize
        window.switchTab = switchTab;
        render();
    </script>
</body>
</html>